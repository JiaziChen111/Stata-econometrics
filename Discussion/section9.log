--------------------------------------------------------------------------------
      name:  <Chisheng Li>
       log:  \Desktop\section9.log
  log type:  text
 opened on:  14 Jul 2014, 22:00:18

. *Part 1;
. gen beauty_2=beauty*beauty;

. reg course_eval beauty, r;

Linear regression                                      Number of obs =     463
                                                       F(  1,   461) =   16.94
                                                       Prob > F      =  0.0000
                                                       R-squared     =  0.0357
                                                       Root MSE      =  .54545

------------------------------------------------------------------------------
             |               Robust
 course_eval |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      beauty |   .1330014   .0323189     4.12   0.000     .0694908    .1965121
       _cons |   3.732269   .0709046    52.64   0.000     3.592933    3.871605
------------------------------------------------------------------------------

. estimates store m1, title(Basic model);

. reg course_eval beauty age, r;

Linear regression                                      Number of obs =     463
                                                       F(  2,   460) =    8.90
                                                       Prob > F      =  0.0002
                                                       R-squared     =  0.0358
                                                       Root MSE      =  .54604

------------------------------------------------------------------------------
             |               Robust
 course_eval |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      beauty |   .1340634   .0318623     4.21   0.000     .0714497     .196677
         age |   .0002868   .0025454     0.11   0.910    -.0047153    .0052889
       _cons |   3.716275   .1454605    25.55   0.000     3.430425    4.002124
------------------------------------------------------------------------------

. estimates store m2, title(Basic model + age);

. reg course_eval beauty beauty_2, r;

Linear regression                                      Number of obs =     463
                                                       F(  2,   460) =    8.78
                                                       Prob > F      =  0.0002
                                                       R-squared     =  0.0377
                                                       Root MSE      =   .5455

------------------------------------------------------------------------------
             |               Robust
 course_eval |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      beauty |    .282095    .168416     1.67   0.095    -.0488651    .6130552
    beauty_2 |  -.0338462   .0371774    -0.91   0.363    -.1069048    .0392124
       _cons |   3.590473   .1742089    20.61   0.000     3.248129    3.932816
------------------------------------------------------------------------------

. estimates store m3, title(Quadratic model);

. reg course_eval beauty beauty_2 age, r;

Linear regression                                      Number of obs =     463
                                                       F(  3,   459) =    6.16
                                                       Prob > F      =  0.0004
                                                       R-squared     =  0.0377
                                                       Root MSE      =  .54609

------------------------------------------------------------------------------
             |               Robust
 course_eval |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      beauty |   .2829059   .1667827     1.70   0.091    -.0448465    .6106583
    beauty_2 |  -.0338116   .0372776    -0.91   0.365    -.1070676    .0394444
         age |   .0002602   .0025597     0.10   0.919    -.0047701    .0052905
       _cons |   3.576107   .1923587    18.59   0.000     3.198094     3.95412
------------------------------------------------------------------------------

. estimates store m4, title(Quadratic model + age);

. estimates table m1 m2 m3 m4, stats(N r2_a) star ;

------------------------------------------------------------------------------
    Variable |      m1              m2              m3              m4        
-------------+----------------------------------------------------------------
      beauty |  .13300144***    .13406337***    .28209502       .28290591     
         age |                  .00028679                       .00026018     
    beauty_2 |                                  -.0338462      -.03381159     
       _cons |  3.7322692***    3.7162746***    3.5904726***    3.5761072***  
-------------+----------------------------------------------------------------
           N |        463             463             463             463     
        r2_a |  .03364409       .03156682       .03347923        .0313929     
------------------------------------------------------------------------------
                                      legend: * p<0.05; ** p<0.01; *** p<0.001

. *test of the significance of the relationship between beauty and course eval u
> sing m4;
. estimates replay m4;

--------------------------------------------------------------------------------
Model m4 (Quadratic model + age)
--------------------------------------------------------------------------------

Linear regression                                      Number of obs =     463
                                                       F(  3,   459) =    6.16
                                                       Prob > F      =  0.0004
                                                       R-squared     =  0.0377
                                                       Root MSE      =  .54609

------------------------------------------------------------------------------
             |               Robust
 course_eval |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      beauty |   .2829059   .1667827     1.70   0.091    -.0448465    .6106583
    beauty_2 |  -.0338116   .0372776    -0.91   0.365    -.1070676    .0394444
         age |   .0002602   .0025597     0.10   0.919    -.0047701    .0052905
       _cons |   3.576107   .1923587    18.59   0.000     3.198094     3.95412
------------------------------------------------------------------------------

. test beauty beauty_2;

 ( 1)  beauty = 0
 ( 2)  beauty_2 = 0

       F(  2,   459) =    9.23
            Prob > F =    0.0001

. *Categorical variable;
. sum beauty, d;

                           beauty
-------------------------------------------------------------
      Percentiles      Smallest
 1%     .5495059       .5495059
 5%      .920442       .5495059
10%     1.017615       .5495059       Obs                 463
25%     1.343731       .5495059       Sum of Wgt.         463

50%     1.931986                      Mean                  2
                        Largest       Std. Dev.      .7886477
75%     2.550288       3.970023
90%     3.154256       3.970023       Variance       .6219651
95%     3.509794       3.970023       Skewness       .5141317
99%     3.775517       3.970023       Kurtosis       2.606365

. gen beauty_category=1 if beauty<r(p25);
(353 missing values generated)

. replace beauty_category=2 if beauty<r(p50) & beauty>=r(p25);
(117 real changes made)

. replace beauty_category=3 if beauty<r(p75) & beauty>=r(p50);
(120 real changes made)

. replace beauty_category=4 if beauty>=r(p75);
(116 real changes made)

. *Regression on beauty_category;
. reg course_eval beauty_category, r;

Linear regression                                      Number of obs =     463
                                                       F(  1,   461) =   13.59
                                                       Prob > F      =  0.0003
                                                       R-squared     =  0.0272
                                                       Root MSE      =  .54787

-------------------------------------------------------------------------------
              |               Robust
  course_eval |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
beauty_cate~y |   .0824972   .0223754     3.69   0.000     .0385269    .1264676
        _cons |   3.790158   .0636486    59.55   0.000     3.665081    3.915236
-------------------------------------------------------------------------------

. * Category dummies;
. gen low=(beauty_category==1);

. gen medium_low=(beauty_category==2);

. gen medium_high=(beauty_category==3);

. gen high=(beauty_category==4);

. * Saturated model;
. reg course_eval medium_low medium_high high, r;

Linear regression                                      Number of obs =     463
                                                       F(  3,   459) =    6.71
                                                       Prob > F      =  0.0002
                                                       R-squared     =  0.0404
                                                       Root MSE      =  .54531

------------------------------------------------------------------------------
             |               Robust
 course_eval |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
  medium_low |   .2257187   .0755602     2.99   0.003     .0772319    .3742055
 medium_high |    .144394   .0710097     2.03   0.043     .0048495    .2839384
        high |   .3054859   .0704234     4.34   0.000     .1670937    .4438781
       _cons |   3.827273    .052066    73.51   0.000     3.724955     3.92959
------------------------------------------------------------------------------

. * Saturated model including female;
. *Interaction variables;
. gen mediumlow_female=medium_low*female;

. gen mediumhigh_female=medium_high*female;

. gen high_female=high*female;

. *Regression;
. reg course_eval medium_low medium_high high female mediumlow_female mediumhigh
> _female high_female, r;

Linear regression                                      Number of obs =     463
                                                       F(  7,   455) =    8.54
                                                       Prob > F      =  0.0000
                                                       R-squared     =  0.1190
                                                       Root MSE      =   .5248

-------------------------------------------------------------------------------
              |               Robust
  course_eval |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
   medium_low |   .5099438   .0911283     5.60   0.000     .3308593    .6890283
  medium_high |   .2941459   .0914647     3.22   0.001     .1144003    .4738915
         high |   .4250715   .0935015     4.55   0.000     .2413232    .6088198
       female |   .1688312   .0927192     1.82   0.069    -.0133798    .3510422
mediumlow_f~e |  -.7153984   .1373367    -5.21   0.000    -.9852913   -.4455055
mediumhigh_~e |  -.3850549   .1337753    -2.88   0.004    -.6479491   -.1221608
  high_female |  -.3091226   .1323957    -2.33   0.020    -.5693054   -.0489398
        _cons |   3.776623    .069022    54.72   0.000     3.640982    3.912265
-------------------------------------------------------------------------------

. 
end of do-file

. exit, clear
